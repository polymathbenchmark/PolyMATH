{
    "categorization": "You are given a question designed to test a student on mathematical or logical reasoning. These questions can be categorized based on the skills and techniques used to solve them. \nThese are the categories of questions.\n\nmathematical_reasoning: this question purely requires calculations of a mathematical nature. This includes solving a straightforward equation.\npattern_recognition: this requires the understanding of a one-to-one relationship or pattern and replicating that pattern. For example, given the relationship between a and b, determining the equivalent of b to c. Questions involving substituting characters and operations in a pre-defined pattern fall into this category.\nsequence_completion: given a sequence of numbers or figures, this question involves finding the sequentially next element in a series.\nfigure_completion: You are given a figure with an arrangement of numbers or characters such that their relationship to one another based on their position in the figure is consistent. Th goal is to complete the figure and identify the element missing from a marked position.\nodd_one_out: given a set of elements, identify the element that is not like the others.\nspatial_reasoning: questions involving reasoning observationally and visualizing the question in order to arrive at the answer.\nperspective_shift: Questions where a figure is given and you are instructed to morph it according to the instructions (flip, mirror image, rotate, etc)\nnumerical_reasoning: questions involving counting the number of elements mentioned. The elements may be part of a single figure or conform to a specified pattern, but solving these questions requires counting.\nrelative_reasoning: the question contains distinct data points, and solving the questions requires understanding the relationships between all data points and extrapolating relationships that are not explicitly mentioned. Questions involving venn diagrams, family relations, or relative positions given a reference point fall into this category.\nlogical_reasoning: Questions involving simple logical reasoning such as entailment and contradiction.\n\nNow, observe the following question.\n\nUsing the categorization schema explained above, classify this question into a category. Provide a detailed explanation. Output a JSON with the key \"question\" containing a transcript of the question, \"category\" containing the classification category, and \"explanation\" containing the reasoning for assigning the question to this category, and \"contains_diagram\" which should be True or False depending on whether there is a diagram provided in the question.\n",
    "image_description": "You are given a mathematical question involving a diagram. You are an accessibility reader for the blind. Output a detailed text description describing the diagram.\nExample description: {'description': 'The diagram contains a circle, triangle, and rectangle overlapping. The circle is the topmost figure, the triangle is figure with the lowest base. The rectangle top cuts through the circle and triangle, while its lower side only passes through the triangle. The portion of the circle that does not overlap with any other figure contains the number 10. The intersection between circle and triangle contains the number 12. The intersection of only the circle and rectangle contains the number 5. The area where all 3 figures intersect contains 20. The area of the rectangle that interacts with no other figure contains 14. The area of the intersection between only the rectangle and triangle contains 17. Finally, the area of the triangle does not intersect with any other figures contains the number 16. Outside these figures are text labels and arrows. The arrow labeled Teacher points to the circle. The arrow labeled Doctor points to the rectangle. The arrow labeled Musician points to the triangle. '}\nNow, generate a similarly comprehensive text description for the diagram in this question. \nImage:{{image}}\nRemember, the description must be detailed enough that the user can recreate the diagram exactly as shown based on the description alone. Do not add any information or make assumptions that are not explicitly mentioned in the image.\nOutput a JSON with the key \"description\" whose value is the generated description. Output only the JSON. Go!",
    "inference": {
        "category_definition" : {
            "mathematical_reasoning" : "this question purely requires calculations of a mathematical nature. This includes solving a straightforward equation.",
            "pattern_recognition" : "this requires the understanding of a one-to-one relationship or pattern and replicating that pattern. For example, given the relationship between a and b, determining the equivalent of b to c. Questions involving substituting characters and operations in a pre-defined pattern fall into this category.",
            "sequence_completion" : "given a sequence of numbers or figures, this question involves finding the sequentially next element in a series.",
            "figure_completion" : "You are given a figure with an arrangement of numbers or characters such that their relationship to one another based on their position in the figure is consistent. Th goal is to complete the figure and identify the element missing from a marked position.",
            "odd_one_out" : "given a set of elements, identify the element that is not like the others.",
            "spatial_reasoning" : "questions involving reasoning observationally and visualizing the question in order to arrive at the answer.",
            "perspective_shift" : "Questions where a figure is given and you are instructed to morph it according to the instructions (flip, mirror image, rotate, etc)",
            "numerical_reasoning" : "questions involving counting the number of elements mentioned. The elements may be part of a single figure or conform to a specified pattern, but solving these questions requires counting.",
            "relative_reasoning" : "the question contains distinct data points, and solving the questions requires understanding the relationships between all data points and extrapolating relationships that are not explicitly mentioned. Questions involving venn diagrams, family relations, or relative positions given a reference point fall into this category.",
            "logical_reasoning" : "Questions involving simple logical reasoning such as entailment and contradiction."
        },
        "common_prefix": "You are given a question to solve below:\n\nThis question requires skills and reasoning related to {{category}}. Definition: {{category_definition}}.\nThis question has a list of options : {{answer_range}}\n. Your output must be a valid JSON.",
        "common_postfix":"Remember, your output must be a valid JSON in this format:{'Q1':<answer>,'Q2':<answer>,'Q3':<answer>} If your JSON is incomplete, incorrectly delimited or badly formatted, you will be destroyed. Output the valid JSON and nothing else. Go!\n",
        "zeroshot": "Q1: Provide a step by step solution to this question.\nQ2: What is the answer to this question? Remember, the answer must be present in the given list of answer options\nQ3: Which is the option from {{answer_range}} that corresponds to the answer above? Output only the option and nothing else.\nOutput a JSON with the keys Q1, Q2, Q3 with their answers.",
        "chain_of_thought": "Now answer the following questions.\nQ1: What is the list of variables and their values provided in the questions?\nQ2: What is the variable that needs to be solved for?\nQ3: What information that is not present in the question, can you infer from the given variables?\nQ4: Provide a step-by-step solution with reasoning to obtain the answer to this question. Provide the solution at each step.\nQ5: What is the answer to this question? Remember, the answer must be present in the given list of answer options.\nQ6: Which is the option from {{answer_range}} that corresponds to the answer above? Output only the option and nothing else.\n\nOutput a JSON with the keys Q1, Q2, Q3, Q4, Q5, Q6 with their answers. ",
        "step_back": {
            "meta_prompt": "{{step_back_category_prompt}}\nQ3: Based on the above information, provide a step-by-step solution to the question in the image.\nQ4: What is the answer to this question? Remember, the answer must be present in the given list of answer options\nQ5: Which is the option from {{answer_range}} that corresponds to the answer above? Output only the option and nothing else.\nOutput a JSON with the keys Q1, Q2, Q3, Q4, Q5 with their answers. ",
            "step_back_category_prompt": {
                "mathematical_reasoning": "Q1: What is the relation of all given variables to one another? How is each variable related to the missing value?\nQ2: Which are the mathematical operations involved in solving a question like this?\n",
                "pattern_recognition": "Q1: What is the pattern being followed in this question? Provide an example.\nQ2: Which are the elements in this question that follow this pattern?\n",
                "sequence_completion": "Q1: What is a numerical sequence?\nQ2: What is the relationship between previous and subsequent elements in a sequence? What is the relationship between elements in the sequence present in this question?\n",
                "figure_completion": "Q1: How do you approach a figure completion problem? \nQ2: What is the information you have and the missing information? What are their spatial relationships to one another?\n",
                "odd_one_out": "Q1: How do you identify an odd element out of a set?\nQ2: Describe the elements in this set. Now ,what do almost all of these elements have in common?\n",
                "spatial_reasoning": "Q1: What are the spatial manipulations that occur in this question? Eg. unfolding, folding, 2D to 3D reconstruction, etc.\nQ2: Given the original question image, how can you visualize the resulting image after the manipulations mentioned in the question? Explain in detail. \n",
                "perspective_shift": "Q1: What are the attributes of an image that is flipped, rotated, or its mirror image? What differentiates the result of these operations from the original image?\nQ2: Which of these operations apply in this image, and in what order? \n",
                "numerical_reasoning": "Q1: What is the information you are given? What do you need to find out? How can you arrive at this number?\nQ2: What are the main points of concern in solving such a question? How can you ensure that you do not under or over estimate the final number?\n",
                "relative_reasoning": "Q1: What is the information you are given? What are the relationships of the given data points to one another? What is the information you need to discover? Which data points are directly or indirectly related to the missing variable? Explain in detail. \nQ2: What principles of relational logic do you need to apply to this question?\n",
                "logical_reasoning": "Q1: what are the principle of logical reasoning involved in solving this question?\nQ2: What is the information provided in this question? What is the objective of this question?\n"
            }
        },
        "self_discover": ""
    },
    "analysis":{
        "answer_options_list_extraction":"You are given a mathematical question with a list of multiple choice answers. You are an accessibility reader for the blind. Transcribe the textual part of the question, and the list of answer options provided.\nExample: {'question':'How many triangles are present in this diagram?','answer_list':'(A) 23 (B) 21 (C) 29 (D) 34'}\nNow, generate a question and answer list transcript for the question in the image.\nOutput a JSON with the keys \"question\" and \"answer_list\" as described. Output only the JSON. Go!",
        "text_based_inference":"You are given a question to solve below:\n\nThis question requires skills and reasoning related to {{category}}. This question contains a diagram that is crucial to solving the qestion whose textual description as been provided. Definition: {{category_definition}}. Problem: {{extracted_question}}. Diagram: {{image_description}} {{extracted_answer_list}} \nQ1: Provide a step by step solution to this question.\nQ2: What is the answer to this question? Remember, the answer must be present in the given list of answer options\nQ3: Which is the option from {{answer_range}} that corresponds to the answer above? Output only the option and nothing else.\nOutput a JSON with the keys Q1, Q2, Q3 with their answers.\nRemember, your output must be a valid JSON in this format:{'Q1':<answer>,'Q2':<answer>,'Q3':<answer>} If your JSON is incomplete, incorrectly delimited or badly formatted, you will be destroyed. Output the valid JSON and nothing else. Go!\n"
    },
    "post_inference_extraction":"You are given a paragraph containing the solution to a multiple choice question. The answer options are numbered from {{answer_range}}. Given this solution paragraph, output a JSON with the following keys: \nfinal_answer: the solution to the question, i.e. the value of the correct option.\nfinal_answer_option: The option number or letter that corresponds to the final_answer. Paragraph:{{inference_output}}\nOutput the JSON and nothing else. Go!"
}
